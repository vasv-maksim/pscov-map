# PscovAgroMap
Картографическое приложение, написанное на стёке MEAN (Mongo, Express, Angular, Node).

**Сайт:** [  http://vasev-maksim.ru](http://vasev-maksim.ru)

![preview](/client/src/assets/preview.png)


**Картографический движок:** OpenLayers5+ol-ext+proj4.

**Управление состоянием:** RxJS.

**Стилизация**: MaterialUI, SCSS, БЭМ, темы, css-модули.

**Функциональные возможности приложения:**


- регистрация и авторизация пользователя;
- просмотр интерактивной карты животноводства Псковской области с различными картографическими элементами;
- система управления картографическими подложками;
### Установка зависимостей:
Для серверной части:


- в корне проекта выполнить команду `npm install`

Для клиентской части:  


- из корня проекта перейти в директорию client, выполнить команду `npm install`
### Запуск: 
Установить зависимости, из корневой папки выполнить команду: `npm run dev`
### В браузере: 
Открыть страницу по адресу:   `http://localhost:4200/`

### Деплой: 
1. На сервере глобально установить git, node+npm
2. Установить pm2 (npm install pm2@latest -g);
3. Склонировать проект `git clone https://vasvmaksim@bitbucket.org/vasvmaksim/pscov_agro_map.git`
4. Установить зависимости для клиента и сервера;
5. Установить переменные окружения (пример для ubuntu):
   
- `export PORT=80`
  
- `export NODE_ENV=prod`
  
- `export JWT=secretJWT`
  
- `export MONGO='mongodb+srv://login:password@cluster0-xxxxx.mongodb.net/test?retryWrites=true&w=majority'`



5. Сбилдить клиент (перейти в папку client, запустить `npm run prod`);
6. Запустить команду из корня `pm2 start index.js`

### Информация по карте: 
Картографическиее данные взяты из Атласа Псковской области. Использовались для практической работы по социально-экономической картографии в 2014 году. 


**Математическая основа карты:**


- проекция Pulkovo 1995 / 3-degree Gauss-Kruger, зона 12 (ESRI:2646);
- начальные кординаты = [12075000, 6376186];
- начальный масштабный уровень = 7;
- линейный масштаб;
- картографическая сеть для данной проекции не поддерживается.

